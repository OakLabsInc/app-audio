doctype html
html(ng-app="audioApp")
  head
    link(href='/css/index.css', rel='stylesheet', type='text/css')
    link(href='css/vendor/angular-material.min.css', rel='stylesheet', type='text/css')
  body(ng-controller="appController" ng-click="tapped($event)" ng-mousemove="mouseMoved($event)" ng-cloak)
    ripples
      .ripple(ng-repeat="r in ripples", ng-style="{ top: r.y + 'px', left: r.x + 'px' }")
    div
      md-card(layout="column" layout-align="center center" layout-padding='' ng-cloak)
        md-card-content(flex layout="column" layout-align="center center")
          h1 Audio Card Source
          p(ng-bind='installProgress')
          md-progress-linear(md-mode="indeterminate" ng-if="installProgress != ''")
        md-card-footer(layout="row" layout-align="center center" layout-margin)
            md-button.md-primary.md-raised(ng-repeat="card in cards" ng-click="setAlsaCard(card)" ng-disabled="(card.toLowerCase() == selectedCard.card.toLowerCase()) || installProgress != ''") Use {{card}} 
      md-card(layout="column" layout-align="center center" layout-padding=''  ng-cloak)
        md-card-content(ng-if="!selectedCard.mixers.length" flex layout="column" layout-align="center center")
          h3 Please select a card to use.
        md-card-content(flex layout="column" layout-align="center center")
          h1 {{selectedCard.card}}
        md-card-footer(layout="column" layout-align="center center")
          
          div(layout="row" layout-align="space-between top" ng-repeat="mixer in selectedCard.mixers")
            h3(flex="40") {{mixer.name}}
            div(flex="60")
              md-slider-container
                div Volume
                md-slider(ng-model="mixer.setting.configuration.volume" md-discrete min="0" max="100" ng-change="setAlsaCardConfiguration(mixer)")
              md-slider-container
                div {{mixer.setting.configuration.mute?'Unmute':'Mute'}}
                md-switch(ng-model="mixer.setting.configuration.mute" aria-label="Mute" ng-change="setAlsaCardConfiguration(mixer)")
            
      md-card(layout="column" layout-align="center center" layout-padding='' ng-cloak)
        md-card-content(flex layout="column" layout-align="center center")
          h1 Audio Tests
        md-card-footer(layout="column" layout-align="center center")
          md-input-container
            md-button.md-primary.md-raised(id="action" onclick="handleAction()") Record for 3 seconds
          //- md-input-container
          //-   audio(controls  controlsList="nodownload")
          //-     source(src="/sounds/LRMonoPhase4.wav" type="audio/wav")

    script(src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js")
    script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular.min.js")
    script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular-animate.min.js")
    script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular-aria.min.js")
    script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular-messages.min.js")
    script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular-cookies.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.min.js")
    script(src="/javascript/vendor/angular-material.min.js")
    script(src="/javascript/index.js")
